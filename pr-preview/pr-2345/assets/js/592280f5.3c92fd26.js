"use strict";(self.webpackChunkgoose=self.webpackChunkgoose||[]).push([[6786],{81422:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"guides/allowlist","title":"Goose Extension Allowlist","description":"This guide explains how Goose controls which extensions you can use. Your organization creates an approved list of safe extensions that work with both the desktop app and command line version of Goose. This keeps your system secure by making sure only trusted extensions can run commands. The approved list is also known as an \\"allowlist\\".","source":"@site/docs/guides/allowlist.md","sourceDirName":"guides","slug":"/guides/allowlist","permalink":"/goose/pr-preview/pr-2345/docs/guides/allowlist","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":19,"frontMatter":{"sidebar_position":19,"title":"Goose Extension Allowlist","sidebar_label":"Goose Extension Allowlist"},"sidebar":"tutorialSidebar","previous":{"title":"Creating Plans","permalink":"/goose/pr-preview/pr-2345/docs/guides/creating-plans"},"next":{"title":"Tutorials","permalink":"/goose/pr-preview/pr-2345/docs/category/tutorials"}}');var l=s(74848),o=s(28453);const t={sidebar_position:19,title:"Goose Extension Allowlist",sidebar_label:"Goose Extension Allowlist"},a=void 0,r={},c=[{value:"Overview",id:"overview",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"Configuration",id:"configuration",level:2},{value:"Setting the Allowlist URL",id:"setting-the-allowlist-url",level:3},{value:"Allowlist File Format",id:"allowlist-file-format",level:3},{value:"Example",id:"example",level:4},{value:"Command Matching",id:"command-matching",level:3},{value:"Special Cases",id:"special-cases",level:3},{value:"Best Practices for Defining Allowlist Entries",id:"best-practices-for-defining-allowlist-entries",level:3},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Example Usage",id:"example-usage",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.p,{children:'This guide explains how Goose controls which extensions you can use. Your organization creates an approved list of safe extensions that work with both the desktop app and command line version of Goose. This keeps your system secure by making sure only trusted extensions can run commands. The approved list is also known as an "allowlist".'}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsx)(n.p,{children:"An allowlist lets administrators control which commands can run in Goose's Stdio extensions. This security feature stops harmful extensions from running unapproved commands on your computer. When turned on, the Goose server agent only allows commands that are on the list. Any command not on this list are blocked, and a Goose user see an error message."}),"\n",(0,l.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Goose fetches the allowlist from a URL specified by the ",(0,l.jsx)(n.code,{children:"GOOSE_ALLOWLIST"})," environment variable."]}),"\n",(0,l.jsx)(n.li,{children:"The allowlist is a YAML file that contains a list of allowed extension commands."}),"\n",(0,l.jsx)(n.li,{children:"The allowlist is fetched once when first needed and cached for the lifetime of the Goose server."}),"\n",(0,l.jsxs)(n.li,{children:["When a Stdio extension is ",(0,l.jsx)(n.a,{href:"/docs/getting-started/using-extensions#adding-extensions",children:"added"}),", Goose checks the command against the allowlist."]}),"\n",(0,l.jsx)(n.li,{children:"If the command is not in the allowlist, the extension registration is rejected."}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,l.jsx)(n.h3,{id:"setting-the-allowlist-url",children:"Setting the Allowlist URL"}),"\n",(0,l.jsxs)(n.p,{children:["Set the ",(0,l.jsx)(n.code,{children:"GOOSE_ALLOWLIST"})," environment variable to the URL of your allowlist YAML file:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"export GOOSE_ALLOWLIST=https://example.com/goose-allowlist.yaml\n"})}),"\n",(0,l.jsxs)(n.p,{children:["You can also add this export to your shell configuration file (On a Mac, it's your ",(0,l.jsx)(n.code,{children:"~/.bashrc"})," or ",(0,l.jsx)(n.code,{children:"~/.zshrc"})," file)."]}),"\n",(0,l.jsx)(n.admonition,{type:"info",children:(0,l.jsx)(n.p,{children:"If this environment variable is not set, no allowlist restrictions are applied. With no restrictions, all commands are allowed."})}),"\n",(0,l.jsx)(n.h3,{id:"allowlist-file-format",children:"Allowlist File Format"}),"\n",(0,l.jsx)(n.p,{children:"The allowlist file needs to be a YAML file with the following structure:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"extensions:\n  - id: extension-id-1\n    command: command-name-1\n  - id: extension-id-2\n    command: command-name-2\n  # ... more extensions\n"})}),"\n",(0,l.jsx)(n.h4,{id:"example",children:"Example"}),"\n",(0,l.jsx)(n.p,{children:"In this example, only the Slack, Github, and Jira extenstions can be enabled in a Goose client:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"extensions:\n  - id: slack\n    command: uvx mcp_slack\n  - id: github\n    command: uvx mcp_github\n  - id: jira\n    command: uvx mcp_jira\n"})}),"\n",(0,l.jsx)(n.h3,{id:"command-matching",children:"Command Matching"}),"\n",(0,l.jsx)(n.p,{children:"When a Stdio extension attempts to register with a command, the Goose server agent does the following:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Extracts the base command name (the last part of the path)","\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["For example, ",(0,l.jsx)(n.code,{children:"/Users/username/bin/mcp slack"})," becomes ",(0,l.jsx)(n.code,{children:"mcp slack"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["Checks if this base command ",(0,l.jsx)(n.strong,{children:"exactly matches"})," any of the command strings in the allowlist"]}),"\n",(0,l.jsx)(n.li,{children:"Allows the extension if there's a match, rejects it otherwise"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"special-cases",children:"Special Cases"}),"\n",(0,l.jsx)(n.p,{children:"There are a few special cases in the command matching logic:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"goosed commands"}),': Any command that is either exactly "goosed" or ends with "/goosed" is always allowed, regardless of the allowlist. This ensures that the Goose server itself can always be executed.']}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"No allowlist"}),": If no allowlist is configured (the ",(0,l.jsx)(n.code,{children:"GOOSE_ALLOWLIST"})," environment variable is not set), all commands are allowed."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.strong,{children:"Empty allowlist"}),": If the allowlist is empty (contains no entries), all commands are allowed."]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"best-practices-for-defining-allowlist-entries",children:"Best Practices for Defining Allowlist Entries"}),"\n",(0,l.jsx)(n.p,{children:"To effectively use the allowlist with exact matching:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Be specific"}),": Define the exact command string that you want to allow."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Include full paths if needed"}),": If you want to allow a command only from a specific path, include the full path in the allowlist."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Regular auditing"}),": Regularly audit your allowlist to ensure it only contains the commands you intend to allow."]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"HTTPS"}),": Always use HTTPS URLs for your allowlist to prevent man-in-the-middle attacks."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Access Control"}),": Ensure the allowlist URL is only accessible to authorized users."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Validation"}),": The allowlist file should be carefully reviewed to ensure only trusted commands are included."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Monitoring"}),": Monitor extension registrations for any rejected commands, which might indicate attempted abuse."]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:"To implement monitoring for rejected commands, use your centralized logging infrastructure and configure Goose clients to send their logs to your logging system."}),"\n",(0,l.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(n.p,{children:"If extensions are being rejected unexpectedly:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["Check if the ",(0,l.jsx)(n.code,{children:"GOOSE_ALLOWLIST"})," environment variable is set correctly."]}),"\n",(0,l.jsx)(n.li,{children:"Verify that the allowlist file is accessible from the server."}),"\n",(0,l.jsx)(n.li,{children:"Ensure the allowlist file is properly formatted YAML."}),"\n",(0,l.jsxs)(n.li,{children:["Check ",(0,l.jsx)(n.a,{href:"/docs/guides/logs",children:"server logs"})," for any errors related to fetching or parsing the allowlist."]}),"\n",(0,l.jsx)(n.li,{children:"Verify that the command in the extension registration exactly matches what's in the allowlist."}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"example-usage",children:"Example Usage"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Create and host an allowlist file:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-yaml",children:"# allowlist.yaml\nextensions:\n  - id: slack\n    command: uvx mcp_slack\n  - id: github\n    command: uvx mcp_github\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"2",children:["\n",(0,l.jsx)(n.li,{children:"Start goose-server with the allowlist URL:"}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"export GOOSE_ALLOWLIST=https://secure-server.example.com/allowlist.yaml\n/Applications/Goose.app/Contents/MacOS/Goosed agent\n"})}),"\n",(0,l.jsxs)(n.ol,{start:"3",children:["\n",(0,l.jsx)(n.li,{children:"When extensions are registered, only those with commands matching the allowlist are accepted."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>a});var i=s(96540);const l={},o=i.createContext(l);function t(e){const n=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);